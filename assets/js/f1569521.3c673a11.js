"use strict";(globalThis.webpackChunkweb_music_score_org=globalThis.webpackChunkweb_music_score_org||[]).push([[7048],{1679(e,n,t){var o;t.d(n,{r:()=>f});var r=t(6540),c=t(1409),i=t(5690),s=t(3721),a=t(1978),d=t(8500),l=t(9041),v=t(4388),u=t(3774),h=t(2175),p=t(8478),j=t(4848);function f(e){const[n,f]=(0,r.useState)(e.code),m=n=>{e.onEdit&&e.onEdit(n),f(n),s.stop()};return(0,j.jsx)(p.A,{children:()=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(c.Q,{language:"jsx",code:n.trim(),scope:{Core:i,Audio:s,AudioCG:a,AudioSynth:d,Score:l,Theory:v,Pieces:u,ReactUI:h,React:o||(o=t.t(r,2))},children:[(0,j.jsx)(c.w,{onChange:m}),(0,j.jsx)(c.p1,{}),(0,j.jsx)("br",{}),(0,j.jsx)(c.pA,{})]}),(0,j.jsx)("br",{}),(0,j.jsxs)("p",{children:["\u2139\ufe0f Runs on ",(0,j.jsx)("code",{children:i.getLibInfo()}),"."]})]})})}},6234(e,n,t){t.r(n),t.d(n,{assets:()=>v,contentTitle:()=>l,default:()=>p,frontMatter:()=>d,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"Events","title":"Events","description":"Events got updated and documented.","source":"@site/docs/100 - Events.md","sourceDirName":".","slug":"/Events","permalink":"/docs/Events","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":100,"frontMatter":{"sidebar_position":100},"sidebar":"docSidebar","previous":{"title":"Paint","permalink":"/docs/paint"}}');var r=t(4848),c=t(8453),i=(t(8881),t(9842)),s=t(8173),a=t(1679);const d={sidebar_position:100},l="Events",v={},u=[{value:"Live Examples",id:"live-examples",level:2},{value:"React JSX/TSX",id:"react-jsxtsx",level:3},{value:"Plain JS",id:"plain-js",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"events",children:"Events"})}),"\n",(0,r.jsx)(s.A,{since:"6.4.0",children:"Events got updated and documented."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'function onScoreEvent(event: Score.ScoreEvent) {\r\n    // Event type can be "enter", "leave" or "click"\r\n    console.log(`Event type:   ${event.type}`);\r\n\r\n    // Is it ScoreStaffEvent?\r\n    if (Score.ScoreStaffEvent.is(event)) {\r\n        console.log("ScoreStaffEvent");\r\n\r\n        // Some note event variables.\r\n        console.log(`Note name:    ${event.noteName}`);\r\n        console.log(`Diatonic id:  ${event.diatonicId}`);\r\n        console.log(`Accidental:   ${event.accidental}`);\r\n        console.log(`Chromatic id: ${event.chromaticId}`);\r\n        console.log(`MIDI number:  ${event.midiNumber}`);\r\n\r\n        // You can play clicked note.\r\n        if(event.type === "click") {\r\n            // With note name.\r\n            Audio.playNote(event.noteName);\r\n            // Or with midi number.\r\n            Audio.playNote(event.midiNumber);\r\n        }\r\n\r\n        // Hilight the staff position on the view.\r\n        const staffPos = { staff: event.staff, diatonicId: event.diatonicId }\r\n        event.view.hilightStaffPos(event.type === "leave" ? undefined : staffPos);\r\n    }\r\n\r\n    // Is it ScoreObjectEevent?\r\n    if (Score.ScoreObjectEvent.is(event)) {\r\n        console.log("ScoreObjectEvent");\r\n\r\n        // Event has object stack from root to top in hierarchy.\r\n        console.log(`Object stack: ${event.objects.map(o => o.name).join(" -> ")}`);\r\n\r\n        // Easily use top object.\r\n        console.log(`Top object: ${event.topObjects.name}`);\r\n\r\n        // Find objects.\r\n        const measure = event.findObject(obj => obj.name === "Measure");\r\n\r\n        // Hilight objects on the view.\r\n        event.view.hilightObject(event.type === "leave" ? undefined : event.topObject);\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"live-examples",children:"Live Examples"}),"\n",(0,r.jsx)(n.h3,{id:"react-jsxtsx",children:"React JSX/TSX"}),"\n",(0,r.jsx)(a.r,{code:'\nfunction ExampleCode() {\n    const doc = new Score.DocumentBuilder()\n        .setScoreConfiguration("treble")\n        .setKeySignature("C Major")\n        .addNote(0, ["C4", "E4", "G4", "C5"], "4n")\n        .addMeasure()\n        .addChord(0, ["C4", "E4", "G4", "C5"], "1n", { arpeggio: "up" })\n        .getDocument();\n\n    function onScoreEvent(event) {\n        if (Score.ScoreEvent.is(event)) {\n            console.log("ScoreEvent type = \'" + event.type + "\'");\n        }\n\n        if (Score.ScoreStaffEvent.is(event)) {\n            event.view.hilightStaffPos(event.type === "leave" ? undefined : event);\n\n            if(event.type === "click")\n                Audio.playNote(event.midiNumber);\n        }\n\n        if (Score.ScoreObjectEvent.is(event)) {\n            event.view.hilightObject(event.type === "leave" ? undefined : event.topObject);\n        }\n    }\n\n    return <ReactUI.WmsView doc={doc} onScoreEvent={onScoreEvent} />;\n}'}),"\n",(0,r.jsx)(n.h3,{id:"plain-js",children:"Plain JS"}),"\n",(0,r.jsx)(a.r,{code:'\nfunction ExampleCode() {\n    React.useEffect(() => {\n        const doc = new Score.DocumentBuilder()\n            .setScoreConfiguration("treble")\n            .setKeySignature("C Major")\n            .addNote(0, ["C4", "E4", "G4", "C5"], "4n")\n            .addMeasure()\n            .addChord(0, ["C4", "E4", "G4", "C5"], "1n", { arpeggio: "up" })\n            .getDocument();\n\n        function onScoreEvent(event) {\n            if (Score.ScoreEvent.is(event)) {\n                console.log("ScoreEvent type = \'" + event.type + "\'");\n            }\n\n            if (Score.ScoreStaffEvent.is(event)) {\n                event.view.hilightStaffPos(event.type === "leave" ? undefined : event);\n\n                if(event.type === "click")\n                    Audio.playNote(event.noteName);\n            }\n\n            if (Score.ScoreObjectEvent.is(event)) {\n                event.view.hilightObject(event.type === "leave" ? undefined : event.topObject);\n            }\n        }\n\n        const view = new Score.WmsView();\n        \n        view.setCanvas("canvasId");\n        view.setDocument(doc);\n        view.setScoreEventListener(onScoreEvent);\n\n        view.draw();\n    }, []);\n\n    return <canvas id="canvasId"></canvas>;\n}'}),"\n",(0,r.jsxs)(i.A,{children:["Use HTML/JS version without ",(0,r.jsx)("code",{children:"React.useEffect()"}),", just add HTML elements before JS code."]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8173(e,n,t){t.d(n,{A:()=>r});t(6540);var o=t(4848);const r=function({since:e,children:n}){return e.startsWith("v")&&(e=e.substring(1)),(0,o.jsxs)("blockquote",{children:[(0,o.jsxs)("strong",{children:["New Feature (v",e,")"]}),": ",n]})}},8881(e,n,t){t.d(n,{U:()=>i,r:()=>c});var o=t(4848);const r={change:"Change",deprecated:"Deprecated",breaking:"Breaking change"};function c({since:e,type:n="change",from:t,to:c,simpleRename:i}){return(0,o.jsxs)("blockquote",{children:[(0,o.jsxs)("strong",{children:[r[n]," (v",e,"):"]})," ",(0,o.jsx)("code",{children:c})," replaces ",(0,o.jsx)("code",{children:t}),".","deprecated"===n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("code",{children:t})," is deprecated and will be removed in a future major release.",i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),"Existing code can be migrated by renaming ",(0,o.jsx)("code",{children:t})," to ",(0,o.jsx)("code",{children:c}),"."]})]})]})}function i(e){return(0,o.jsx)(c,{...e,type:"deprecated"})}},9842(e,n,t){t.d(n,{A:()=>a});t(6540);var o=t(4164);const r="hint_M8wi",c="icon_S8Po",i="content_vBYW";var s=t(4848);function a({children:e,icon:n}){return(0,s.jsxs)("div",{className:(0,o.A)(r),children:[(0,s.jsx)("span",{className:c,children:n??"\ud83d\udca1"}),(0,s.jsx)("div",{className:i,children:e})]})}}}]);