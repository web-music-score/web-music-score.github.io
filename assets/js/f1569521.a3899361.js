"use strict";(globalThis.webpackChunkweb_music_score_org=globalThis.webpackChunkweb_music_score_org||[]).push([[7048],{7103(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>v});const o=JSON.parse('{"id":"Events","title":"Events","description":"Planned for 6.4.x","source":"@site/docs/100 - Events.md","sourceDirName":".","slug":"/Events","permalink":"/docs/Events","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":100,"frontMatter":{"sidebar_position":100},"sidebar":"docSidebar","previous":{"title":"Paint","permalink":"/docs/paint"}}');var r=t(4848),i=t(8453),c=t(1679);const a=[{name:"Event Handling In Plain JavaScript",code:'\nfunction ExampleCode() {\n    // This example requires use of useEffect() because of React environment.\n    // In real world, the HTML elements need to be declared before using them in JavaScript.\n    React.useEffect(() => {\n        const doc = new Score.DocumentBuilder()\n            .setScoreConfiguration({ type: "staff", clef: "G", minNote: "E3", maxNote: "E6" })\n            .setKeySignature("C Major")\n            .addNote(0, ["C4", "E4", "G4", "C5"], "4n")\n            .addMeasure()\n            .addChord(0, ["C4", "E4", "G4", "C5"], "1n", { arpeggio: "up" })\n            .getDocument();\n\n        function onScoreEvent(event) {\n            if (Score.ScoreEvent.is(event)) {\n                console.log("ScoreEvent type = \'" + event.type + "\'");\n            }\n\n            if (Score.ScoreStaffEvent.is(event)) {\n                event.view.hilightStaffPos(event.type === "leave" ? undefined : event);\n\n                if(event.type === "click")\n                    Audio.playNote(event.noteName);\n            }\n\n            if (Score.ScoreObjectEvent.is(event)) {\n                event.view.hilightObject(event.type === "leave" ? undefined : event.topObject);\n            }\n        }\n\n        const view = new Score.WmsView();\n        \n        view.setCanvas("canvasId");\n        view.setDocument(doc);\n        view.setScoreEventListener(onScoreEvent);\n\n        view.draw();\n    }, []);\n\n    return <canvas id="canvasId"></canvas>;\n}'},{name:"Event Handling With React",code:'\nfunction ExampleCode() {\n    const doc = new Score.DocumentBuilder()\n        .setScoreConfiguration("treble")\n        .setKeySignature("C Major")\n        .addNote(0, ["C4", "E4", "G4", "C5"], "4n")\n        .addMeasure()\n        .addChord(0, ["C4", "E4", "G4", "C5"], "1n", { arpeggio: "up" })\n        .getDocument();\n\n    function onScoreEvent(event) {\n        if (Score.ScoreEvent.is(event)) {\n            console.log("ScoreEvent type = \'" + event.type + "\'");\n        }\n\n        if (Score.ScoreStaffEvent.is(event)) {\n            event.view.hilightStaffPos(event.type === "leave" ? undefined : event);\n\n            if(event.type === "click")\n                Audio.playNote(event.midiNumber);\n        }\n\n        if (Score.ScoreObjectEvent.is(event)) {\n            event.view.hilightObject(event.type === "leave" ? undefined : event.topObject);\n        }\n    }\n\n    return <ReactUI.WmsView doc={doc} onScoreEvent={onScoreEvent} />;\n}'}],s={sidebar_position:100},d="Events",l={},v=[{value:"Planned for 6.4.x",id:"planned-for-64x",level:2},{value:"6.3.x and Earlier",id:"63x-and-earlier",level:2},{value:"Live Example",id:"live-example",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"events",children:"Events"})}),"\n",(0,r.jsx)(n.h2,{id:"planned-for-64x",children:"Planned for 6.4.x"}),"\n",(0,r.jsx)(n.p,{children:"Upcoming release 6.4.x will have some event handling."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:'function onScoreEvent(event: Score.ScoreEvent) {\r\n    // Event type can be "enter", "leave" or "click"\r\n    console.log(`Event type:   ${event.type}`);\r\n\r\n    // Is it ScoreStaffEvent?\r\n    if (Score.ScoreStaffEvent.is(event)) {\r\n        console.log("ScoreStaffEvent");\r\n\r\n        // Some note event variables.\r\n        console.log(`Note name:    ${event.noteName}`);\r\n        console.log(`Diatonic id:  ${event.diatonicId}`);\r\n        console.log(`Accidental:   ${event.accidental}`);\r\n        console.log(`Chromatic id: ${event.chromaticId}`);\r\n        console.log(`MIDI number:  ${event.midiNumber}`);\r\n\r\n        // You can play clicked note.\r\n        if(event.type === "click") {\r\n            // With note name.\r\n            Audio.playNote(event.noteName);\r\n            // Or with midi number.\r\n            Audio.playNote(event.midiNumber);\r\n        }\r\n\r\n        // Hilight the staff position on the view.\r\n        const staffPos = { staff: event.staff, diatonicId: event.diatonicId }\r\n        event.view.hilightStaffPos(event.type === "leave" ? undefined : staffPos);\r\n    }\r\n\r\n    // Is it ScoreObjectEevent?\r\n    if (Score.ScoreObjectEvent.is(event)) {\r\n        console.log("ScoreObjectEvent");\r\n\r\n        // Event has object stack from root to top in hierarchy.\r\n        console.log(`Object stack: ${event.objects.map(o => o.name).join(" -> ")}`);\r\n\r\n        // Easily use top object.\r\n        console.log(`Top object: ${event.topObjects.name}`);\r\n\r\n        // Find objects.\r\n        const measure = event.findObject(obj => obj.name === "Measure");\r\n\r\n        // Hilight objects on the view.\r\n        event.view.hilightObject(event.type === "leave" ? undefined : event.topObject);\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"63x-and-earlier",children:"6.3.x and Earlier"}),"\n",(0,r.jsx)(n.p,{children:"Versions 6.3.x and earlier also have some event handling but they are undocumented.\r\nEvents for 6.4 required update after internal changes."}),"\n",(0,r.jsx)(n.h2,{id:"live-example",children:"Live Example"}),"\n",(0,r.jsx)(n.p,{children:"This example runs on 6.4.0-pre-release."}),"\n",(0,r.jsx)(c.r,{code:a})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},1679(e,n,t){var o;t.d(n,{r:()=>g});var r=t(6540),i=t(1409),c=t(5690),a=t(3721),s=t(1978),d=t(8500),l=t(9041),v=t(4388),u=t(3774),p=t(2175),f=t(8478),h=t(4848);function m(e){const[n,m]=r.useState(e.entry.code),g=n=>{e.onEdit&&e.onEdit(n),m(n),a.stop()};return(0,h.jsx)(f.A,{children:()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(i.Q,{language:"jsx",code:n,scope:{Core:c,Audio:a,AudioCG:s,AudioSynth:d,Score:l,Theory:v,Pieces:u,ReactUI:p,React:o||(o=t.t(r,2))},children:[(0,h.jsx)(i.w,{onChange:g}),(0,h.jsx)(i.p1,{}),(0,h.jsx)("br",{}),(0,h.jsx)(i.pA,{})]}),(0,h.jsx)("br",{}),(0,h.jsxs)("p",{children:["\u2139\ufe0f Runs on ",(0,h.jsx)("code",{children:c.getLibInfo()}),"."]})]})})}function g(e){const[n,t]=r.useState(0),o=(i=e.code,(Array.isArray(i)?i:[i]).map((e,n,t)=>{if("string"==typeof e){const o=t.length>1?"Example "+(n+1):"";return{name:o,code:""===o?e.trim():`// ${o}\n${e.trim()}`}}{const n=e.name.trim();return{name:n,code:""===n?e.code.trim():`// ${n}\n${e.code.trim()}`}}}));var i;const c=o[n];return(0,h.jsxs)(h.Fragment,{children:[o.length>1?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("select",{value:n,onChange:e=>t(Number(e.target.value)),className:"select",children:o.map((e,n)=>(0,h.jsx)("option",{value:n,children:e.name},n))}),(0,h.jsx)("br",{}),(0,h.jsx)("br",{})]}):null,(0,h.jsx)(m,{entry:c},n)]})}}}]);